name: Comment on Pull Request

on:
  pull_request:
    types: [opened]

jobs:
  comment:
    runs-on: ubuntu-latest
    steps:
    # Check out the repository
    - name: Check out repository
      uses: actions/checkout@v3

    # Post a comment using github-script
    - name: Post Comment
      uses: actions/github-script@v6
      with:
        script: |
          const comment = `Checkliste Code Review ğŸ‰
          FunktionalitÃ¤t:
          - Wird das Akzeptanzkriterium erfÃ¼llt: âœ…âŒâ–
          - Ist die Implementierung Effizient/Performant genug: âœ…âŒâ–
          - Kritische Inputs/Parameter werden validiert (Zum Beispiel Null, OutOfBounds): âœ…âŒâ–
          - Sonstiges:
          
          Sicherheit:
          - Unberechtigte Nutzer kÃ¶nnen nicht auf Daten/Bereiche Zugreifen auf die sie es nicht sollen: âœ…âŒâ–
          - Sonstiges:
          
          Tests:
          - Gibt es automatisierte Tests, wenn immer es mÃ¶glich ist: âœ…âŒâ–
          - Gibt es manuelle TestplÃ¤ne, wenn automatisierte Tests nicht notwendig sind: âœ…âŒâ–
          - Alle automatisierten Tests werden akzeptiert: âœ…âŒâ–
          - Alle manuellen TestplÃ¤ne werden akzeptiert: âœ…âŒâ–
          - Werden RandfÃ¤lle getestet: âœ…âŒâ–
          - Werden invalide Eingaben getestet: âœ…âŒâ–
          - Die Webseite wird auch korrekt auf mobilen EndgerÃ¤ten angezeigt: âœ…âŒâ–
          - Sonstiges:
          
          Code Lesbarkeit:
          - Sind alle Variablen, Funktionen, Klassen, Dateien Sinnvoll benannt: âœ…âŒâ–
          - Es wird eine sinnvolle Ordnerstruktur eingehalten: âœ…âŒâ–
          - Es gibt keine Code Doppelungen: âœ…âŒâ–
          - Der Code ist korrekt formatiert: âœ…âŒâ–
          - SubfunktionalitÃ¤ten werden ausgelagert: âœ…âŒâ–
          - Keine Funktion ist zu lang: âœ…âŒâ–
          - LÃ¤ngere Styles und Script Sektionen sind ausgelagert in Separate Files: âœ…âŒâ–
          
          Dokumentation:
          - FÃ¼r jede Code Datei, wird die FunktionalitÃ¤t und der Kontext erklÃ¤rt: âœ…âŒâ–
          - Jede PHP-Klasse und Funktion wird nach den PHP-Doc Standards kommentiert: âœ…âŒâ–
              https://docs.phpdoc.org/guide/references/phpdoc/basic-syntax.html#what-is-a-docblock
          - FÃ¼r entscheidende FunktionalitÃ¤ten gibt es Inlinekommentare: âœ…âŒâ–
          -	Sonstiges:
          
          Weiteres:
          - Es gibt keine Errors und keine Warnungen in der IDE oder von Teamscale: âœ…âŒâ–
          -	Relevante Parameter KÃ¶nnen konfiguriert werden: âœ…âŒâ–`;
          
          // Use octokit to create the comment
          await github.rest.issues.createComment({
            owner: context.repo.owner,
            repo: context.repo.repo,
            issue_number: context.payload.pull_request.number,
            body: comment
          });
